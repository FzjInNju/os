[toc]

# 静态链接和动态链接

1. 编译链接过程

   - 源文件预处理：处理带#的语句，如宏、#include、#ifedf，生成**.i 文件**

   - 编译：词法分析、语法分析、语义分析、代码优化等，生成**汇编文件 .S**

   - 汇编：将汇编指令翻译成机器指令，生成**二进制可重定位目标文件 .o**

     https://blog.csdn.net/kang___xi/article/details/80210717

     ![image-20211104005312846](C:\Users\junlines\AppData\Roaming\Typora\typora-user-images\image-20211104005312846.png)

   - 链接：在形成可执行程序前静态链接，或在程序执行时动态链接

2. 静态链接

   - 概念：**在编译链接阶段直接把需要的目标文件拷贝到调用处**
   - 优点：运行速度快
   - 缺点：**浪费内存空间，更新困难**

3. 动态链接

   3.1 装载时动态链接：

   - 在编译前明确知道要调用的函数，程序执行时将需要的全部函数加载进内存

   - 优点：代码共享

   3.2 运行时动态链接：

   - 在编译前不知道要调用的函数，程序执行时根据需要调用相应的函数
   - 优点：高效利用内存空间

# ☆ 链接操作

```
nasm -f elf -o fuction.o fuction.asm    ;nasm汇编汇编语言源文件
gcc -o hello main.c fuction.o           ;gcc编译C语言源文件+链接
./hello                                 ;运行
```

